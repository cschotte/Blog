{{/* Taxonomy list JSON output for Azure AI Search vector store */}}
{
  "id": {{ .RelPermalink | jsonify }},
  "title": {{ .Title | jsonify }},
  "description": {{ printf "All posts in %s" .Title | jsonify }},
  "url": {{ .Permalink | jsonify }},
  "relative_url": {{ .RelPermalink | jsonify }},
  "type": "taxonomy",
  "taxonomy": {{ .Data.Singular | jsonify }},
  "term": {{ .Data.Term | jsonify }},
  "kind": {{ .Kind | jsonify }},
  "pages": [
    {{- range $index, $page := .Pages -}}
      {{- if $index -}},{{- end }}
      {
        "id": {{ $page.RelPermalink | jsonify }},
        "title": {{ $page.Title | jsonify }},
        "description": {{ $page.Description | default $page.Summary | jsonify }},
        "url": {{ $page.Permalink | jsonify }},
        "date": {{ $page.Date.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
        "categories": {{ $page.Params.categories | default slice | jsonify }},
        "tags": {{ $page.Params.tags | default slice | jsonify }},
        "section": {{ $page.Section | jsonify }},
        "summary": {{ $page.Summary | plainify | jsonify }}
      }
    {{- end }}
  ],
  "pageCount": {{ len .Pages }},
  "@timestamp": {{ now.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
  "@type": "taxonomy"
}